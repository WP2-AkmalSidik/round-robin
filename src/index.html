<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Antrian Round Robin</title>
    <link href="./output.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <style>
        /* Advanced animations and modern effects */
        .fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }

        .slide-up {
            animation: slideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }

        .slide-down {
            animation: slideDown 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }

        .scale-in {
            animation: scaleIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        .bounce-gentle {
            animation: bounceGentle 0.6s ease-out forwards;
        }

        .pulse-ring {
            animation: pulseRing 2s infinite;
        }

        .shimmer {
            animation: shimmer 2s infinite linear;
        }

        .float {
            animation: float 3s ease-in-out infinite;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes bounceGentle {
            0% {
                opacity: 0;
                transform: scale(0.9) translateY(10px);
            }

            60% {
                opacity: 0.8;
                transform: scale(1.02) translateY(-2px);
            }

            100% {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        @keyframes pulseRing {
            0% {
                box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7);
            }

            70% {
                box-shadow: 0 0 0 15px rgba(34, 197, 94, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(34, 197, 94, 0);
            }
        }

        @keyframes shimmer {
            0% {
                background-position: -200px 0;
            }

            100% {
                background-position: calc(200px + 100%) 0;
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        .gradient-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .gradient-success {
            background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%);
        }

        .gradient-info {
            background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%);
        }

        .glassmorphism {
            backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .card-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        .shimmer-bg {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200px 100%;
        }

        .scroll-smooth {
            scroll-behavior: smooth;
        }

        /* Mobile-first responsive improvements */
        @media (max-width: 640px) {
            .mobile-spacing {
                padding: 1rem;
            }

            .mobile-text-sm {
                font-size: 0.875rem;
            }

            .mobile-hidden {
                display: none;
            }
        }

        /* Custom scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 4px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f5f9;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 2px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
    </style>
</head>

<body class="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 scroll-smooth">
    <!-- Mobile-Optimized Header -->
    <header class="gradient-primary text-white shadow-2xl relative overflow-hidden">
        <div class="absolute inset-0 bg-black opacity-10"></div>
        <div class="relative container mx-auto px-4 sm:px-6 py-4 sm:py-6">
            <div class="flex items-center justify-center space-x-3 fade-in">
                <div
                    class="w-10 h-10 sm:w-12 sm:h-12 bg-white/20 rounded-full flex items-center justify-center hover:bg-white/30 transition-all duration-300 cursor-pointer group">
                    <i class="fas fa-users text-lg sm:text-xl group-hover:scale-110 transition-transform"></i>
                </div>
                <div class="text-center">
                    <h1 class="text-lg sm:text-2xl font-bold tracking-wide">Sistem Antrian</h1>
                    <p class="text-xs sm:text-sm opacity-90 font-light">Round Robin Algorithm</p>
                </div>
            </div>
        </div>
    </header>

    <div class="container mx-auto px-4 sm:px-6 py-4 sm:py-8 space-y-6 sm:space-y-8">
        <!-- Enhanced Stats Cards - Mobile First -->
        <div class="grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6">
            <div class="bg-white rounded-xl sm:rounded-2xl shadow-lg p-4 sm:p-6 border-l-4 border-blue-500 card-hover slide-up"
                style="animation-delay: 0.1s">
                <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0">
                    <div class="flex-1">
                        <p class="text-gray-600 text-xs sm:text-sm font-medium">Total</p>
                        <p class="text-xl sm:text-2xl font-bold text-gray-900" id="totalQueue">0</p>
                    </div>
                    <div class="flex justify-end sm:block">
                        <div class="w-8 h-8 sm:w-10 sm:h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-list-ol text-blue-500 text-sm sm:text-base"></i>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl sm:rounded-2xl shadow-lg p-4 sm:p-6 border-l-4 border-green-500 card-hover slide-up"
                style="animation-delay: 0.2s">
                <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0">
                    <div class="flex-1">
                        <p class="text-gray-600 text-xs sm:text-sm font-medium">Dilayani</p>
                        <p class="text-xl sm:text-2xl font-bold text-gray-900" id="servedQueue">0</p>
                    </div>
                    <div class="flex justify-end sm:block">
                        <div class="w-8 h-8 sm:w-10 sm:h-10 bg-green-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-check-circle text-green-500 text-sm sm:text-base"></i>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl sm:rounded-2xl shadow-lg p-4 sm:p-6 border-l-4 border-amber-500 card-hover slide-up"
                style="animation-delay: 0.3s">
                <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0">
                    <div class="flex-1">
                        <p class="text-gray-600 text-xs sm:text-sm font-medium">Menunggu</p>
                        <p class="text-xl sm:text-2xl font-bold text-gray-900" id="waitingQueue">0</p>
                    </div>
                    <div class="flex justify-end sm:block">
                        <div class="w-8 h-8 sm:w-10 sm:h-10 bg-amber-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-clock text-amber-500 text-sm sm:text-base"></i>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl sm:rounded-2xl shadow-lg p-4 sm:p-6 border-l-4 border-purple-500 card-hover slide-up"
                style="animation-delay: 0.4s">
                <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0">
                    <div class="flex-1">
                        <p class="text-gray-600 text-xs sm:text-sm font-medium">Petugas</p>
                        <p class="text-xl sm:text-2xl font-bold text-gray-900">3</p>
                    </div>
                    <div class="flex justify-end sm:block">
                        <div class="w-8 h-8 sm:w-10 sm:h-10 bg-purple-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-user-tie text-purple-500 text-sm sm:text-base"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mobile-First Layout -->
        <div class="space-y-6 lg:space-y-0 lg:grid lg:grid-cols-12 lg:gap-8">
            <!-- Input Section - Mobile First -->
            <div class="lg:col-span-4 space-y-4 sm:space-y-6">
                <!-- Add Queue Card -->
                <div class="bg-white rounded-xl sm:rounded-2xl shadow-lg p-4 sm:p-6 scale-in"
                    style="animation-delay: 0.5s">
                    <div class="flex items-center space-x-3 mb-4 sm:mb-6">
                        <div class="w-8 h-8 sm:w-10 sm:h-10 gradient-info rounded-lg flex items-center justify-center">
                            <i class="fas fa-user-plus text-white text-sm sm:text-base"></i>
                        </div>
                        <h2 class="text-lg sm:text-xl font-semibold text-gray-800">Tambah Antrian</h2>
                    </div>

                    <form id="queueForm" class="space-y-4">
                        <div class="space-y-2">
                            <label for="customerName" class="block text-sm font-medium text-gray-700">
                                <i class="fas fa-user text-gray-400 mr-2"></i>Nama Pelanggan
                            </label>
                            <input type="text" id="customerName" name="customerName"
                                class="w-full px-4 py-3 sm:py-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 ease-in-out text-sm sm:text-base"
                                placeholder="Masukkan nama..." required>
                        </div>

                        <button type="submit"
                            class="w-full gradient-info text-white font-semibold py-3 sm:py-4 px-6 rounded-xl transition-all duration-300 ease-in-out transform hover:scale-105 active:scale-95 shadow-lg hover:shadow-xl text-sm sm:text-base">
                            <i class="fas fa-plus-circle mr-2"></i>Tambah ke Antrian
                        </button>
                    </form>

                    <!-- Next Officer Display -->
                    <div
                        class="mt-4 sm:mt-6 p-4 bg-gradient-to-r from-indigo-50 to-blue-50 rounded-xl border border-indigo-100">
                        <h3 class="text-sm font-semibold text-gray-700 mb-3">
                            <i class="fas fa-info-circle text-indigo-500 mr-2"></i>Petugas Berikutnya
                        </h3>
                        <div class="flex items-center space-x-3">
                            <div
                                class="w-8 h-8 sm:w-10 sm:h-10 bg-indigo-500 rounded-full flex items-center justify-center">
                                <i class="fas fa-user-tie text-white text-xs sm:text-sm"></i>
                            </div>
                            <span class="font-medium text-gray-800 text-sm sm:text-base" id="nextOfficer">Petugas
                                A</span>
                        </div>
                    </div>
                </div>

                <!-- Call Button -->
                <div class="scale-in" style="animation-delay: 0.6s">
                    <button id="callNextBtn"
                        class="w-full gradient-success text-white font-bold py-4 sm:py-5 px-6 rounded-xl transition-all duration-300 ease-in-out transform hover:scale-105 active:scale-95 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none text-sm sm:text-base"
                        disabled>
                        <i class="fas fa-bell mr-2"></i>Panggil Antrian Berikutnya
                    </button>
                </div>

                <!-- Officers Summary - Mobile Optimized -->
                <div class="grid grid-cols-1 gap-3 scale-in" style="animation-delay: 0.7s">
                    <div class="bg-white rounded-lg shadow-md p-3 sm:p-4 border-l-4 border-blue-500">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-user-tie text-blue-500 text-xs"></i>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-gray-800 text-sm">Rina</h4>
                                    <p class="text-xs text-gray-600">Dilayani: <span id="officerA-count">0</span></p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow-md p-3 sm:p-4 border-l-4 border-green-500">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-user-tie text-green-500 text-xs"></i>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-gray-800 text-sm">NurWidiya</h4>
                                    <p class="text-xs text-gray-600">Dilayani: <span id="officerB-count">0</span></p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow-md p-3 sm:p-4 border-l-4 border-purple-500">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-user-tie text-purple-500 text-xs"></i>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-gray-800 text-sm">Nanda</h4>
                                    <p class="text-xs text-gray-600">Dilayani: <span id="officerC-count">0</span></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Queue Table Section - Mobile First -->
            <div class="lg:col-span-8">
                <div class="bg-white rounded-xl sm:rounded-2xl shadow-lg p-4 sm:p-6 slide-up"
                    style="animation-delay: 0.8s">
                    <div
                        class="flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0 mb-4 sm:mb-6">
                        <div class="flex items-center space-x-3">
                            <div
                                class="w-8 h-8 sm:w-10 sm:h-10 gradient-primary rounded-lg flex items-center justify-center">
                                <i class="fas fa-list text-white text-sm sm:text-base"></i>
                            </div>
                            <h2 class="text-lg sm:text-xl font-semibold text-gray-800">Daftar Antrian</h2>
                        </div>
                        <button id="clearAllBtn"
                            class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-all duration-200 ease-in-out text-sm font-medium transform hover:scale-105 active:scale-95">
                            <i class="fas fa-trash mr-1"></i>Hapus Semua
                        </button>
                    </div>

                    <!-- Mobile-Optimized Queue Display -->
                    <div class="space-y-3 sm:space-y-0">
                        <!-- Mobile Queue Cards (visible on small screens) -->
                        <div class="block sm:hidden" id="mobileQueueList">
                            <!-- Mobile queue items will be inserted here -->
                        </div>

                        <!-- Desktop Table (hidden on small screens) -->
                        <div class="hidden sm:block overflow-x-auto custom-scrollbar">
                            <table class="w-full">
                                <thead>
                                    <tr class="bg-gray-50 border-b border-gray-200">
                                        <th class="text-left py-3 px-4 font-semibold text-gray-700 text-sm">No. Antrian
                                        </th>
                                        <th class="text-left py-3 px-4 font-semibold text-gray-700 text-sm">Nama
                                            Pelanggan</th>
                                        <th class="text-left py-3 px-4 font-semibold text-gray-700 text-sm">Petugas</th>
                                        <th class="text-left py-3 px-4 font-semibold text-gray-700 text-sm">Status</th>
                                        <th class="text-left py-3 px-4 font-semibold text-gray-700 text-sm">Aksi</th>
                                    </tr>
                                </thead>
                                <tbody id="queueTableBody">
                                    <!-- Desktop queue items will be inserted here -->
                                </tbody>
                            </table>
                        </div>

                        <!-- Enhanced Empty State -->
                        <div id="emptyState" class="text-center py-8 sm:py-12">
                            <div
                                class="w-16 h-16 sm:w-20 sm:h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4 float">
                                <i class="fas fa-inbox text-gray-300 text-2xl sm:text-3xl"></i>
                            </div>
                            <p class="text-gray-500 text-base sm:text-lg font-medium">Belum ada antrian</p>
                            <p class="text-gray-400 text-sm">Tambahkan pelanggan pertama untuk memulai</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Enhanced Toast Notification -->
    <div id="toast" class="fixed top-4 right-4 z-50 transform translate-x-full transition-all duration-500 ease-out">
        <div class="bg-white rounded-xl shadow-xl border border-gray-100 p-4 min-w-72 sm:min-w-80 backdrop-blur-lg">
            <div class="flex items-center space-x-3">
                <div id="toastIcon" class="flex-shrink-0"></div>
                <div class="flex-1">
                    <p id="toastMessage" class="text-sm font-medium text-gray-800"></p>
                </div>
                <button id="toastClose" class="text-gray-400 hover:text-gray-600 transition-colors duration-200 p-1">
                    <i class="fas fa-times text-sm"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl p-6 shadow-2xl">
            <div class="flex items-center space-x-3">
                <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"></div>
                <span class="text-gray-700 font-medium">Memproses...</span>
            </div>
        </div>
    </div>

    <script>
        // Enhanced Queue Management System with Mobile Optimization
        class QueueManager {
            constructor() {
                this.queue = [];
                this.officers = ['Rina', 'NurWidiya', 'Nanda'];
                this.currentOfficerIndex = 0;
                this.queueCounter = 1;
                this.servedCount = 0;
                this.officerCounts = { 'Rina': 0, 'NurWidiya': 0, 'Nanda': 0 };

                this.initializeEventListeners();
                this.updateUI();
                this.initializeAnimations();
            }

            initializeEventListeners() {
                const form = document.getElementById('queueForm');
                const callNextBtn = document.getElementById('callNextBtn');
                const clearAllBtn = document.getElementById('clearAllBtn');
                const toastClose = document.getElementById('toastClose');

                form.addEventListener('submit', (e) => this.handleAddQueue(e));
                callNextBtn.addEventListener('click', () => this.handleCallNext());
                clearAllBtn.addEventListener('click', () => this.handleClearAll());
                toastClose.addEventListener('click', () => this.hideToast());

                // Mobile touch optimization
                this.addTouchFeedback();
            }

            addTouchFeedback() {
                const buttons = document.querySelectorAll('button');
                buttons.forEach(button => {
                    button.addEventListener('touchstart', () => {
                        button.style.transform = 'scale(0.95)';
                    });
                    button.addEventListener('touchend', () => {
                        setTimeout(() => {
                            button.style.transform = '';
                        }, 100);
                    });
                });
            }

            initializeAnimations() {
                // Staggered animations for initial load
                const animatedElements = document.querySelectorAll('.slide-up, .scale-in, .fade-in');
                animatedElements.forEach((el, index) => {
                    el.style.opacity = '0';
                    el.style.transform = 'translateY(20px)';
                    setTimeout(() => {
                        el.style.opacity = '1';
                        el.style.transform = 'translateY(0)';
                        el.style.transition = 'all 0.6s cubic-bezier(0.16, 1, 0.3, 1)';
                    }, index * 100);
                });
            }

            handleAddQueue(e) {
                e.preventDefault();
                const nameInput = document.getElementById('customerName');
                const name = nameInput.value.trim();

                if (name) {
                    this.showLoadingSpinner();
                    setTimeout(() => {
                        this.addToQueue(name);
                        nameInput.value = '';
                        nameInput.focus();
                        this.hideLoadingSpinner();
                    }, 300);
                }
            }

            addToQueue(customerName) {
                const queueItem = {
                    id: Date.now(),
                    number: this.queueCounter++,
                    name: customerName,
                    officer: this.officers[this.currentOfficerIndex],
                    status: 'waiting',
                    timestamp: new Date()
                };

                this.queue.push(queueItem);
                this.currentOfficerIndex = (this.currentOfficerIndex + 1) % this.officers.length;

                this.updateUI();
                this.showToast('success', `${customerName} berhasil ditambahkan ke antrian`);
                this.animateNewQueueItem();
            }

            handleCallNext() {
                const nextQueue = this.queue.find(item => item.status === 'waiting');
                if (nextQueue) {
                    this.showLoadingSpinner();
                    setTimeout(() => {
                        nextQueue.status = 'served';
                        this.servedCount++;
                        this.officerCounts[nextQueue.officer]++;

                        this.updateUI();
                        this.showToast('info', `${nextQueue.name} dipanggil ke ${nextQueue.officer}`);
                        this.animateCallQueue(nextQueue.id);
                        this.hideLoadingSpinner();
                    }, 500);
                }
            }

            handleClearAll() {
                if (this.queue.length > 0) {
                    this.queue = [];
                    this.queueCounter = 1;
                    this.servedCount = 0;
                    this.officerCounts = { 'Rina': 0, 'NurWidiya': 0, 'Nanda': 0 };
                    this.updateUI();
                    this.showToast('warning', 'Semua antrian telah dihapus');
                }
            }

            removeQueueItem(id) {
                this.queue = this.queue.filter(item => item.id !== id);
                this.updateUI();
                this.showToast('info', 'Item antrian telah dihapus');
            }

            updateUI() {
                this.updateStats();
                this.updateQueueDisplay();
                this.updateNextOfficer();
                this.updateCallButton();
                this.updateOfficerCounts();
            }

            updateStats() {
                const stats = {
                    total: this.queue.length,
                    served: this.servedCount,
                    waiting: this.queue.filter(item => item.status === 'waiting').length
                };

                this.animateNumber('totalQueue', stats.total);
                this.animateNumber('servedQueue', stats.served);
                this.animateNumber('waitingQueue', stats.waiting);
            }

            animateNumber(elementId, newValue) {
                const element = document.getElementById(elementId);
                const currentValue = parseInt(element.textContent);

                if (currentValue !== newValue) {
                    element.style.transform = 'scale(1.1)';
                    element.style.transition = 'all 0.3s ease';

                    setTimeout(() => {
                        element.textContent = newValue;
                        element.style.transform = 'scale(1)';
                    }, 150);
                }
            }

            updateQueueDisplay() {
                const mobileList = document.getElementById('mobileQueueList');
                const desktopTable = document.getElementById('queueTableBody');
                const emptyState = document.getElementById('emptyState');

                if (this.queue.length === 0) {
                    mobileList.innerHTML = '';
                    desktopTable.innerHTML = '';
                    emptyState.style.display = 'block';
                    return;
                }

                emptyState.style.display = 'none';

                // Mobile cards
                mobileList.innerHTML = this.queue.map(item => this.createMobileQueueCard(item)).join('');

                // Desktop table rows
                desktopTable.innerHTML = this.queue.map(item => this.createDesktopQueueRow(item)).join('');
            }

            createMobileQueueCard(item) {
                const statusClass = item.status === 'waiting' ?
                    'bg-amber-50 text-amber-800 border-amber-200' :
                    'bg-green-50 text-green-800 border-green-200';
                const statusIcon = item.status === 'waiting' ? 'fas fa-clock' : 'fas fa-check-circle';
                const statusText = item.status === 'waiting' ? 'Menunggu' : 'Dilayani';

                return `
                    <div class="bg-white rounded-xl shadow-md p-4 border border-gray-100 card-hover bounceGentle" data-id="${item.id}">
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold">
                                    ${item.number}
                                </div>
                                <div>
                                    <h3 class="font-semibold text-gray-900 text-sm">${item.name}</h3>
                                    <p class="text-xs text-gray-500">
                                        <i class="fas fa-user-tie mr-1"></i>${item.officer}
                                    </p>
                                </div>
                            </div>
                            <button 
                                onclick="queueManager.removeQueueItem(${item.id})"
                                class="text-red-400 hover:text-red-600 transition duration-200 p-2"
                                title="Hapus antrian"
                            >
                                <i class="fas fa-trash text-sm"></i>
                            </button>
                        </div>
                        <div class="flex justify-center">
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${statusClass}">
                                <i class="${statusIcon} mr-1"></i>
                                ${statusText}
                            </span>
                        </div>
                    </div>
                `;
            }

            createDesktopQueueRow(item) {
                const statusClass = item.status === 'waiting' ?
                    'bg-amber-100 text-amber-800' :
                    'bg-green-100 text-green-800';
                const statusIcon = item.status === 'waiting' ? 'fas fa-clock' : 'fas fa-check-circle';
                const statusText = item.status === 'waiting' ? 'Menunggu' : 'Dilayani';

                return `
                    <tr class="border-b border-gray-100 hover:bg-gray-50 transition-all duration-200 bounceGentle" data-id="${item.id}">
                        <td class="py-4 px-4">
                            <div class="flex items-center space-x-2">
                                <div class="w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold">
                                    ${item.number}
                                </div>
                            </div>
                        </td>
                        <td class="py-4 px-4">
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-user text-gray-400"></i>
                                <span class="font-medium text-gray-900">${item.name}</span>
                            </div>
                        </td>
                        <td class="py-4 px-4">
                            <div class="flex items-center space-x-2">
                                <i class="fas fa-user-tie text-indigo-500"></i>
                                <span class="text-gray-800">${item.officer}</span>
                            </div>
                        </td>
                        <td class="py-4 px-4">
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${statusClass}">
                                <i class="${statusIcon} mr-1"></i>
                                ${statusText}
                            </span>
                        </td>
                        <td class="py-4 px-4">
                            <button 
                                onclick="queueManager.removeQueueItem(${item.id})"
                                class="text-red-500 hover:text-red-700 transition duration-200 p-2 hover:bg-red-50 rounded-lg"
                                title="Hapus antrian"
                            >
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                `;
            }

            updateNextOfficer() {
                const nextOfficerElement = document.getElementById('nextOfficer');
                nextOfficerElement.style.transform = 'scale(1.1)';
                nextOfficerElement.style.transition = 'all 0.3s ease';

                setTimeout(() => {
                    nextOfficerElement.textContent = this.officers[this.currentOfficerIndex];
                    nextOfficerElement.style.transform = 'scale(1)';
                }, 150);
            }

            updateCallButton() {
                const callBtn = document.getElementById('callNextBtn');
                const hasWaiting = this.queue.some(item => item.status === 'waiting');

                callBtn.disabled = !hasWaiting;

                if (hasWaiting) {
                    callBtn.classList.add('pulse-ring');
                    callBtn.style.animation = 'pulseRing 2s infinite';
                } else {
                    callBtn.classList.remove('pulse-ring');
                    callBtn.style.animation = 'none';
                }
            }

            updateOfficerCounts() {
                const counts = [
                    { id: 'officerA-count', value: this.officerCounts['Rina'] },
                    { id: 'officerB-count', value: this.officerCounts['NurWidiya'] },
                    { id: 'officerC-count', value: this.officerCounts['Nanda'] }
                ];

                counts.forEach(({ id, value }) => {
                    this.animateNumber(id, value);
                });
            }

            animateNewQueueItem() {
                setTimeout(() => {
                    const newItems = document.querySelectorAll('[data-id]:last-child');
                    newItems.forEach(item => {
                        item.style.animation = 'bounceGentle 0.6s ease-out forwards';
                    });
                }, 100);
            }

            animateCallQueue(id) {
                const mobileCard = document.querySelector(`#mobileQueueList [data-id="${id}"]`);
                const desktopRow = document.querySelector(`#queueTableBody [data-id="${id}"]`);

                [mobileCard, desktopRow].forEach(element => {
                    if (element) {
                        element.style.animation = 'bounceGentle 0.6s ease-out forwards';
                        element.style.background = 'linear-gradient(135deg, #dcfce7, #bbf7d0)';

                        setTimeout(() => {
                            element.style.background = '';
                        }, 1000);
                    }
                });
            }

            showToast(type, message) {
                const toast = document.getElementById('toast');
                const toastIcon = document.getElementById('toastIcon');
                const toastMessage = document.getElementById('toastMessage');

                const icons = {
                    success: '<div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center"><i class="fas fa-check text-green-500"></i></div>',
                    error: '<div class="w-8 h-8 bg-red-100 rounded-full flex items-center justify-center"><i class="fas fa-times text-red-500"></i></div>',
                    warning: '<div class="w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center"><i class="fas fa-exclamation-triangle text-amber-500"></i></div>',
                    info: '<div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center"><i class="fas fa-info text-blue-500"></i></div>'
                };

                toastIcon.innerHTML = icons[type] || icons.info;
                toastMessage.textContent = message;

                toast.classList.remove('translate-x-full');
                toast.classList.add('translate-x-0');
                toast.style.animation = 'slideDown 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards';

                setTimeout(() => {
                    this.hideToast();
                }, 4000);
            }

            hideToast() {
                const toast = document.getElementById('toast');
                toast.classList.remove('translate-x-0');
                toast.classList.add('translate-x-full');
            }

            showLoadingSpinner() {
                const spinner = document.getElementById('loadingSpinner');
                spinner.classList.remove('hidden');
                spinner.style.animation = 'fadeIn 0.3s ease forwards';
            }

            hideLoadingSpinner() {
                const spinner = document.getElementById('loadingSpinner');
                spinner.style.animation = 'fadeOut 0.3s ease forwards';
                setTimeout(() => {
                    spinner.classList.add('hidden');
                }, 300);
            }
        }

        // Initialize the queue manager when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            window.queueManager = new QueueManager();

            // Add smooth scrolling behavior
            document.documentElement.style.scrollBehavior = 'smooth';

            // Add viewport height fix for mobile
            const setVH = () => {
                let vh = window.innerHeight * 0.01;
                document.documentElement.style.setProperty('--vh', `${vh}px`);
            };

            setVH();
            window.addEventListener('resize', setVH);

            // Add keyboard navigation
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' && e.target.id === 'customerName') {
                    e.preventDefault();
                    document.getElementById('queueForm').dispatchEvent(new Event('submit'));
                }
            });

            // Add focus management for better accessibility
            const inputs = document.querySelectorAll('input, button');
            inputs.forEach(input => {
                input.addEventListener('focus', (e) => {
                    e.target.style.outline = '2px solid #3b82f6';
                    e.target.style.outlineOffset = '2px';
                });

                input.addEventListener('blur', (e) => {
                    e.target.style.outline = 'none';
                });
            });
        });

        // Add CSS for additional animations
        const additionalStyles = `
            @keyframes fadeOut {
                from { opacity: 1; }
                to { opacity: 0; }
            }
            
            .bounceGentle {
                animation: bounceGentle 0.6s ease-out forwards;
            }
            
            @media (prefers-reduced-motion: reduce) {
                *, *::before, *::after {
                    animation-duration: 0.01ms !important;
                    animation-iteration-count: 1 !important;
                    transition-duration: 0.01ms !important;
                }
            }
            
            /* Enhanced mobile experience */
            @media (max-width: 640px) {
                .container {
                    padding-left: 1rem;
                    padding-right: 1rem;
                }
                
                .mobile-optimized {
                    padding: 0.75rem;
                    font-size: 0.875rem;
                }
                
                /* Improve touch targets */
                button, input {
                    min-height: 44px;
                }
                
                /* Better spacing on mobile */
                .space-y-3 > * + * {
                    margin-top: 0.75rem;
                }
            }
        `;

        const styleSheet = document.createElement('style');
        styleSheet.textContent = additionalStyles;
        document.head.appendChild(styleSheet);
    </script>
</body>

</html>